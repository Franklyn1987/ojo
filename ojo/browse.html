<!DOCTYPE html>
<html>
<head>
    <!--<link rel="stylesheet" href="browse.css" type="text/css"/>-->
    <style>
        img {
            display: block;
        }

        body {
            background: rgba(0, 0, 0, 0);
        }

        .item {
            margin: 10px;
            float: left;
        }

        .item.selected {
            margin: 0px;
            border: solid 10px #F07746;
        }
    </style>
</head>

<body>
</body>
<script src="lib/jquery-2.0.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function add_image(file, b64, current) {
        var html = "<div class='item' file='%file'><img src='data:image/jpg;base64,%b64'/></div>";
        html = html.replace(/%file/g, file).replace("%b64", b64);
        var elem = $(html);
        elem.click(function() {window.location = "ojo:" + file});
        $('body').append(elem);
    }

    var current;
    function select(file) {
        current = file;
        $(".item").removeClass('selected');
        var el = $(".item[file='" + file + "']");
        el.addClass('selected');
        if (el.offset().top > $('body').scrollTop() + $(window).height() - 200) {
            $('body').animate({scrollTop: el.offset().top - $(window).height() + 200}, {duration: 100, queue: false});
        } else if (el.offset().top < $('body').scrollTop() + 200) {
            $('body').animate({scrollTop: el.offset().top - 200}, {duration: 100, queue: false});
        }
    }

    $(function() {
        $(document).contextmenu(function(event) {
            event.preventDefault();
        });

        $(window).resize(function() {
            select(current);
        })
    });
</script>
</html>
